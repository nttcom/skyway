/**
 * Position icons into circle (SO)
 * http://stackoverflow.com/q/12813573/1397351 
 */

//.js-transmission-animation {
//    
//    position:absolute;
//    
//    top:180px;
//    
//    background-color: red;
//    
//    height: 100px;
//    width: 100%;
//    object-fit: scale-down;
//    
//    left:0;
//    right:0;
//    margin:auto;
//}

@import "utilities/mixins";

.animated-logo {
    /* Common code - positioning happens individually */
  
    position: relative;
    display: table;
    margin: auto;
    margin-bottom: 32px;
    
    height: 56px;

    object-fit: scale-down;
    
    opacity: 0.1;
    
    -webkit-animation: pulsateLogo 3s 1s ease-out infinite; 
       -moz-animation: pulsateLogo 3s 1s ease-out infinite; 
         -o-animation: pulsateLogo 3s 1s ease-out infinite; 
            animation: pulsateLogo 3s 1s ease-out infinite; 
    
//    background-color: green;
}

.animated-transmission {
    
    position: relative;
    display: table;
    margin: auto;
    
    // This width doesn't matter but has to be small (for centering purposes)
    width: 100px; 
    height: 70px;
    
//    background-color: green;
}

$animation-mobile-offset: 0%;

.animation-mobile {
//    margin-left: 50% + $animation-mobile-offset;
//    margin-right: 50% - $animation-mobile-offset;
}

//@media (max-width: $screen-md) {
//    
//    $circle-diameter: 20em;
//    
//    .animated-transmission {
//        background-color: green;
//    }
//    
//    .circle-container {
//        width: $circle-diameter;
//        height: $circle-diameter;
//    }
//    
//}

//#animated-logo-mobile {
//    
//    position:absolute;
//    top: 32px;
//    
//    left: 0;
//    right: 40px;
//    margin: auto;
//    
//    
//}

/*
@media screen and (max-width:1200px){
    .js-transmission-animation {
        top: 80px;
    }
    
    #animated-logo-js {
        top: 92px;
    }
    
    .ios-transmission-animation {
        top:40px;
        left:0;
        right:0;
        margin: auto;
    }
    
    #animated-logo-mobile {
        top: 50px;
        left:0;
        right:0;
        margin: auto;
    }
}
*/

$circle-diameter:   40em;
$circle-radius:     $circle-diameter * 0.5;

$orb-diameter:      $circle-diameter * 0.045;//1.8em;
$orb-margin:        ($orb-diameter * -0.5);

$orb-color:         #fff;
$orb-opacity:       0; // Starting opacity

.circle-container {
	position: absolute;
    
    // Keep the circle div centered at all times
    left: 50%;
    -webkit-transform: translate(-50%);
    -moz-transform: translate(-50%);
    -ms-transform: translate(-50%);
    transform: translate(-50%);
    
    
	width: $circle-diameter;
    height: $circle-diameter;
	padding: 2.8em; /*= 2em * 1.4 (2em = half the width of an img, 1.4 = sqrt(2))*/
//    border: dashed 1px;
	border-radius: 50%;
//	margin: 1.75em auto 0;
    
//    background-color: red;
    
}
.circle-container div {
	display: block;
	overflow: hidden;
	position: absolute;
	top: 50%; left: 50%;
	width: $orb-diameter;
    height: $orb-diameter;
	margin: $orb-margin;//-0.9em; /* 2em = 4em/2 */ /* half the width */
    
    border-radius: 50%;
    
    background-color: $orb-color;
    opacity: $orb-opacity;
   
}

.circle-container div:nth-of-type(1) { 
    -webkit-animation: pulsate1 3s 0s ease-out infinite;  
       -moz-animation: pulsate1 3s 0s ease-out infinite;  
         -o-animation: pulsate1 3s 0s ease-out infinite;  
            animation: pulsate1 3s 0s ease-out infinite;  
} 

.circle-container div:nth-of-type(2) { 
    -webkit-animation: pulsate2 3s 0.25s ease-out infinite; 
       -moz-animation: pulsate2 3s 0.25s ease-out infinite; 
         -o-animation: pulsate2 3s 0.25s ease-out infinite; 
            animation: pulsate2 3s 0.25s ease-out infinite; 
}

.circle-container div:nth-of-type(3) { 
    -webkit-animation: pulsate3 3s 0.5s ease-out infinite; 
       -moz-animation: pulsate3 3s 0.5s ease-out infinite; 
         -o-animation: pulsate3 3s 0.5s ease-out infinite; 
            animation: pulsate3 3s 0.5s ease-out infinite; 
}

.circle-container div:nth-of-type(4) {
    -webkit-animation: pulsate4 3s 0.75s ease-out infinite; 
       -moz-animation: pulsate4 3s 0.75s ease-out infinite; 
         -o-animation: pulsate4 3s 0.75s ease-out infinite; 
            animation: pulsate4 3s 0.75s ease-out infinite; 
}

.circle-container div:nth-of-type(5) { 
    -webkit-animation: pulsate5 3s 1s ease-out infinite; 
       -moz-animation: pulsate5 3s 1s ease-out infinite; 
         -o-animation: pulsate5 3s 1s ease-out infinite; 
            animation: pulsate5 3s 1s ease-out infinite; 
}

.circle-container div:nth-of-type(6) { 
    -webkit-animation: pulsate6 3s 1.25s ease-out infinite; 
       -moz-animation: pulsate6 3s 1.25s ease-out infinite; 
         -o-animation: pulsate6 3s 1.25s ease-out infinite; 
            animation: pulsate6 3s 1.25s ease-out infinite; 
}

.circle-container div:nth-of-type(7) { 
    -webkit-animation: pulsate7 3s 1.5s ease-out infinite; 
       -moz-animation: pulsate7 3s 1.5s ease-out infinite; 
         -o-animation: pulsate7 3s 1.5s ease-out infinite; 
            animation: pulsate7 3s 1.5s ease-out infinite; 
}

/* this is for showing the circle on which the images are placed */
.circle-container:after {
	position: absolute;
	top: 2.8em; left: 2.8em;
	width: 40em; height: 40em;
/*	border: dashed 1px darkblue;*/
	border-radius: 50%;
	opacity: .3;
	pointer-events: none;
	content: '';
}



/*
@-webkit-keyframes pulsate1 {
    0% {-webkit-transform: rotate(246deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
    33% {opacity: 0.8;}
    66% {-webkit-transform: rotate(246deg) translate($circle-radius) scale(1.2, 1.2); opacity: 0.0;}
}

@-webkit-keyframes pulsate2 {
    0% {-webkit-transform: rotate(256deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
    33% {opacity: 0.8;}
    66% {-webkit-transform: rotate(256deg) translate($circle-radius) scale(1.2, 1.2); opacity: 0.0;}
}

@-webkit-keyframes pulsate3 {
    0% {-webkit-transform: rotate(266deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
    33% {opacity: 0.8;}
    66% {-webkit-transform: rotate(266deg) translate($circle-radius) scale(1.2, 1.2); opacity: 0.0;}
}

@-webkit-keyframes pulsate4 {
    0% {-webkit-transform: rotate(276deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
    33% {opacity: 0.8;}
    66% {-webkit-transform: rotate(276deg) translate($circle-radius) scale(1.2, 1.2); opacity: 0.0;}
}

@-webkit-keyframes pulsate5 {
    0% {-webkit-transform: rotate(286deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
    33% {opacity: 0.8;}
    66% {-webkit-transform: rotate(286deg) translate($circle-radius) scale(1.2, 1.2); opacity: 0.0;}
}

@-webkit-keyframes pulsate6 {
    0% {-webkit-transform: rotate(296deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
    33% {opacity: 0.8;}
    66% {-webkit-transform: rotate(296deg) translate($circle-radius) scale(1.2, 1.2); opacity: 0.0;}
}

@-webkit-keyframes pulsate7 {
    0% {-webkit-transform: rotate(306deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
    33% {opacity: 0.8;}
    66% {-webkit-transform: rotate(306deg) translate($circle-radius) scale(1.2, 1.2); opacity: 0.0;}
}
*/

/* Main Animation - webkit keyframes */

@-webkit-keyframes pulsateLogo {
    0% {opacity: 0.25;}
    33% {opacity: 0.8;}
    66% {opacity: 0.25;}
}

//@-webkit-keyframes pulsate1 {
//    0% {-webkit-transform: rotate(234deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {-webkit-transform: rotate(234deg) translate($circle-radius) scale(0.75, 0.75); opacity: 0.8;}
//    66% {-webkit-transform: rotate(234deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@-webkit-keyframes pulsate2 {
//    0% {-webkit-transform: rotate(246deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {-webkit-transform: rotate(246deg) translate($circle-radius) scale(0.9, 0.9);opacity: 0.8;}
//    66% {-webkit-transform: rotate(246deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@-webkit-keyframes pulsate3 {
//    0% {-webkit-transform: rotate(258deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {-webkit-transform: rotate(258deg) translate($circle-radius) scale(1.05, 1.05); opacity: 0.8;}
//    66% {-webkit-transform: rotate(258deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@-webkit-keyframes pulsate4 {
//    0% {-webkit-transform: rotate(270deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {-webkit-transform: rotate(270deg) translate($circle-radius) scale(1.2, 1.2); opacity: 0.8;}
//    66% {-webkit-transform: rotate(270deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@-webkit-keyframes pulsate5 {
//    0% {-webkit-transform: rotate(282deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {-webkit-transform: rotate(282deg) translate($circle-radius) scale(1.05, 1.05); opacity: 0.8;}
//    66% {-webkit-transform: rotate(282deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@-webkit-keyframes pulsate6 {
//    0% {-webkit-transform: rotate(294deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {-webkit-transform: rotate(294deg) translate($circle-radius) scale(0.9, 0.9); opacity: 0.8;}
//    66% {-webkit-transform: rotate(294deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@-webkit-keyframes pulsate7 {
//    0% {-webkit-transform: rotate(306deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {-webkit-transform: rotate(306deg) translate($circle-radius) scale(0.75, 0.75); opacity: 0.8;}
//    66% {-webkit-transform: rotate(306deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}



/* Main Animation - keyframes */


@keyframes pulsateLogo {
    0% {opacity: 0.25;}
    33% {opacity: 0.8;}
    66% {opacity: 0.25;}
}

//@keyframes pulsate1 {
//    0% {transform: rotate(234deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {transform: rotate(234deg) translate($circle-radius) scale(0.75, 0.75); opacity: 0.8;}
//    66% {transform: rotate(234deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@keyframes pulsate2 {
//    0% {transform: rotate(246deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {transform: rotate(246deg) translate($circle-radius) scale(0.9, 0.9);opacity: 0.8;}
//    66% {transform: rotate(246deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@keyframes pulsate3 {
//    0% {transform: rotate(258deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {transform: rotate(258deg) translate($circle-radius) scale(1.05, 1.05); opacity: 0.8;}
//    66% {transform: rotate(258deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@keyframes pulsate4 {
//    0% {transform: rotate(270deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {transform: rotate(270deg) translate($circle-radius) scale(1.2, 1.2); opacity: 0.8;}
//    66% {transform: rotate(270deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@keyframes pulsate5 {
//    0% {transform: rotate(282deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {transform: rotate(282deg) translate($circle-radius) scale(1.05, 1.05); opacity: 0.8;}
//    66% {transform: rotate(282deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@keyframes pulsate6 {
//    0% {transform: rotate(294deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {transform: rotate(294deg) translate($circle-radius) scale(0.9, 0.9); opacity: 0.8;}
//    66% {transform: rotate(294deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}
//
//@keyframes pulsate7 {
//    0% {transform: rotate(306deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//    33% {transform: rotate(306deg) translate($circle-radius) scale(0.75, 0.75); opacity: 0.8;}
//    66% {transform: rotate(306deg) translate($circle-radius) scale(0.1, 0.1); opacity: 0.0;}
//}


// Test

$keyframe-names: ();
$keyframe-scales: ();
$keyframe-rotations: ();

$number-points: 7;      // 7 pulsating orbs (animation points)
$middle-point: ceil($number-points/2);

$opacity-min: 0.0;
$opacity-max: 0.8;

$scale-min: 0.1;

$scale-center: 1.2;
$scale-step: 0.15;
$scale-start: ($scale-center - ($scale-step * ($middle-point - 1)));

$rotation-center: 270;  // Animation midpoint rotation (degrees)
$rotation-step: 12;     // Rotation difference between 

$rotation-start: ($rotation-center - ($rotation-step * ($middle-point - 1)));

@for $i from 1 through $number-points {
    $keyframe-names: append($keyframe-names, pulsate + $i);
    
    $keyframe-rotations: append($keyframe-rotations, #{$rotation-start + ($rotation-step * ($i - 1))}deg);

    @if $i < $middle-point {
        $keyframe-scales: append($keyframe-scales, #{$scale-start + ($scale-step * ($i - 1))});
    } @else {
        $keyframe-scales: append($keyframe-scales, #{$scale-center - ($scale-step * ($i - $middle-point))});
    }
}

@for $i from 1 through length($keyframe-names) {
    @-webkit-keyframes #{nth($keyframe-names, $i)} {
        0% {-webkit-transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
        33% {-webkit-transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale(nth($keyframe-scales, $i), nth($keyframe-scales, $i)); opacity: $opacity-max;}
        66% {-webkit-transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
    }
    
    @keyframes #{nth($keyframe-names, $i)} {
        0% {transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
        33% {transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale(nth($keyframe-scales, $i), nth($keyframe-scales, $i)); opacity: $opacity-max;}
        66% {transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
    }
}











@include bp(sm) {
    $circle-diameter:   35em;
    $circle-radius:     $circle-diameter * 0.5;
    
    .circle-container {
        width: $circle-diameter;
        height: $circle-diameter;
    }
    
    .circle-container div {
        width: $orb-diameter;
        height: $orb-diameter;
        margin: $orb-margin;
    }
    
    @for $i from 1 through length($keyframe-names) {
        @-webkit-keyframes #{nth($keyframe-names, $i)} {
            0% {-webkit-transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
            33% {-webkit-transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale(nth($keyframe-scales, $i), nth($keyframe-scales, $i)); opacity: $opacity-max;}
            66% {-webkit-transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
        }

        @keyframes #{nth($keyframe-names, $i)} {
            0% {transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
            33% {transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale(nth($keyframe-scales, $i), nth($keyframe-scales, $i)); opacity: $opacity-max;}
            66% {transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
        }
    }
}

@include bp(xxs) {
    
    $circle-diameter:   25em;
    $circle-radius:     $circle-diameter * 0.5;
    
    $orb-diameter:      $circle-diameter * 0.045;
    $orb-margin:        ($orb-diameter * -0.5);
    
    .circle-container {
        width: $circle-diameter;
        height: $circle-diameter;
    }
    
    .circle-container div {
        width: $orb-diameter;
        height: $orb-diameter;
        margin: $orb-margin;
    }
    
    .animated-logo {
        height: 46px;   
        margin-bottom: 20px;
    }
    
    .animated-transmission {
        height: 40px;   
    }
    
    @for $i from 1 through length($keyframe-names) {
        @-webkit-keyframes #{nth($keyframe-names, $i)} {
            0% {-webkit-transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
            33% {-webkit-transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale(nth($keyframe-scales, $i), nth($keyframe-scales, $i)); opacity: $opacity-max;}
            66% {-webkit-transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
        }

        @keyframes #{nth($keyframe-names, $i)} {
            0% {transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
            33% {transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale(nth($keyframe-scales, $i), nth($keyframe-scales, $i)); opacity: $opacity-max;}
            66% {transform: rotate(nth($keyframe-rotations, $i)) translate($circle-radius) scale($scale-min, $scale-min); opacity: $opacity-min;}
        }
    }
    
}