<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<!doctype html>
<html lang="">

<head>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="generator" content="Polymer Starter Kit" />
  <title>SkyWay</title>
  <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

  <!-- Chrome for Android theme color -->
  <meta name="theme-color" content="#5487FF">

  <!-- Web Application Manifest -->
  <link rel="manifest" href="manifest.json">

  <!-- Tile color for Win8 -->
  <meta name="msapplication-TileColor" content="#5487FF">

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="Polymer Starter Kit">
  <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Polymer Starter Kit">
  <link rel="apple-touch-icon" href="images/touch/apple-touch-icon.png">

  <!-- Tile icon for Win8 (144x144) -->
  <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">

  <!-- build:css styles/main.css -->
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="styles/main.css">
  <!-- endbuild-->

  <!-- build:js bower_components/webcomponentsjs/webcomponents-lite.min.js -->
  <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <!-- endbuild -->

  <!-- will be replaced with elements/elements.vulcanized.html -->
  <link rel="import" href="elements/elements.html">
  <!-- endreplace-->
    
</head>

<body unresolved class="fullbleed layout vertical">
  <span id="browser-sync-binding"></span>
  <template is="dom-bind" id="app">

<!--    <paper-drawer-panel id="paperDrawerPanel">-->
<!--
      <div drawer>

        <paper-toolbar id="drawerToolbar">
          <span class="paper-font-title">Menu</span>
        </paper-toolbar>

          <paper-menu class="list" attr-for-selected="data-route" selected="{{route}}" on-iron-select="onMenuSelect">
              <a data-route="home" href="/">
                <iron-icon icon="home"></iron-icon>
                <span>Home</span>
              </a>

              <a data-route="users" href="/users">
                <iron-icon icon="info"></iron-icon>
                <span>Users</span>
              </a>

              <a data-route="contact" href="/contact">
                <iron-icon icon="mail"></iron-icon>
                <span>Contact</span>
              </a>
          </paper-menu>
      </div>
-->
        
      <paper-header-panel main >
          
<!--
        <paper-toolbar id="mainToolbar">
            
          <paper-icon-button id="paperToggle" icon="menu" paper-drawer-toggle></paper-icon-button>
          <span class="flex"></span>

          <paper-icon-button icon="refresh"></paper-icon-button>
          <paper-icon-button icon="search"></paper-icon-button>

          <div class="middle paper-font-display2 app-name">Skyway</div>

          <div class="bottom title">This, is a test.</div>
            
        </paper-toolbar>
-->
        
        <paper-toolbar id="custom-toolbar">
            <div id="toolbar-inner">
                <div id="logo-div">
                    <img id="logo" src="images/logo-full.png" onclick="location.href='/index.html';"></img>
                </div>

                <div id="button-div">
                    <paper-button id="loginButton" raised class="colorful">Login</paper-button>
                    <paper-button id="langButton">日本語</paper-button>
                </div>
            
                <div id="tabBar-div">
                    <paper-tabs flex alignBottom selected="3">
                        <paper-tab onclick="location.href='/ios.html';">iOS</paper-tab>
                        <paper-tab onclick="location.href='/android.html';">Android</paper-tab>
                        <paper-tab onclick="location.href='/javascript.html';">JavaScript</paper-tab>
                        <paper-tab onclick="location.href='/documentation.html';">Docs</paper-tab>
                        <paper-tab>Support</paper-tab>
                        <paper-tab>Features</paper-tab>
                    </paper-tabs>
                </div>
            </div>
        </paper-toolbar>
      
        <paper-fab icon="favorite" id="share-button"></paper-fab>
      
        <div id="header-section">
            <h1 id="header-title">Getting Started.</h1>
            <h2 id="header-subtitle">Learn how to make the most out of SkyWay.</h2>
            
            <paper-material id="header-icon-div">
                <div id="header-icon-inner">
                    <img src="images/JS.png" id="header-icon-img">
                </div>
            </paper-material>
        </div>
      
      <div id="main-section">
          <div id="text-area">
          
              PeerJS simplifies peer-to-peer data, video, and audio calls.
              This guide will show you the basic concepts of the PeerJS API. If you learn better from seeing a working app, see the examples at the bottom of the page.
              This document is for NTT Communication's cloud service "SkyWay", a customized version of PeerJS.
              
              <paper-material class="code-section" elevation="2">
                  <pre></pre>
              </paper-material>

              <h2>Setup</h2>
              <h3>1. Include the Javascript client</h3>
              <p>Add the PeerJS client library to your webpage.</p>
              
              
              <paper-material class="code-section" elevation="2">
                  <pre>&lt;script src="https://skyway.io/dist/0.3/peer.min.js"&gt;&lt;/script&gt;</pre>
              </paper-material>
              
              <p>If you prefer, you can host it yourself: <a download href="https://skyway.io/dist/0.3/peer.js">peer.js</a>, <a download href="https://skyway.io/dist/0.3/peer.min.js">peer.min.js</a>, or <a href="https://github.com/nttcom/peerjs">fork us on Github</a>.</p>
              
              <h3>2. Create the Peer object</h3>
              <p>The Peer object is where we create and receive connections.</p>
              
              <paper-material class="code-section" elevation="2">
                  <pre>var peer = new Peer({key: 'APIKEY'});</pre>
              </paper-material>

              <p>You can <a href="https://nttcom.github.io/skyway/en/registration.html">sign up for your own free key</a>. PeerJS uses PeerServer for session metadata and candidate signaling. You can also <a href="http://github.com/peers/peerjs-server">run your own PeerServer</a> if you don't like the cloud.</p>
              <p>We're now ready to start making connections!</p>

              <h2>Usage</h2>
              <p>Every Peer object is assigned a random, unique ID when it's created.</p>

              <paper-material class="code-section" elevation="2">
                  <pre>peer.on('open', function(id) {
    console.log('My peer ID is: ' + id);
});</pre>
              </paper-material>             
                  
              <p>When we want to connect to another peer, we'll need to know their peer
              id. You're in charge of communicating the peer IDs between users of your
              site. Optionally, you can pass in your own IDs to the <a href="#peer"><code>Peer</code>
                constructor</a>.</p>

              <p>Read the <a href="#peer">Peer API reference</a> for complete
              information on its <a href="#peer-options">options</a>, methods, <a href="#peeron">events</a>, and <a
                href="#peeron-error">error handling</a>.</p>

              <h3>Data connections</h3>
              
              <p>Start a data connection by calling <code>peer.connect</code> with the peer ID of the
              destination peer. Anytime another peer attempts to connect to your peer
              ID, you'll receive a <code>connection</code> event. </p>
              
              <div class="two-col">
                <div class="col col-header">Start connection</div>
                <div class="col col-header">Receive connection</div>
                <div class="col"><pre>var conn = peer.connect('dest-peer-id');</pre></div>
                <div class="col"><pre>peer.on('connection', function(conn) { ... });</pre></div>
                <div class="clear"></div>
              </div>
              
              <p><code>peer.connect</code> and the callback of the
              <code>connection</code> event will both provide a
              <code>DataConnection</code> object. This object will allow you to send and receive data:</p>
              
              <paper-material class="code-section" elevation="2">
                  <pre>conn.on('open', function() {
  // Receive messages
  conn.on('data', function(data) {
    console.log('Received', data);
  });

  // Send messages
  conn.send('Hello!');
});</pre>
              </paper-material>
              
              <p>Read the <a href="#dataconnection">DataConnection API reference</a> for complete details on its methods and events.</p>
      
              <h3>Video/audio calls</h3>
              
              <p>Call another peer by calling <code>peer.call</code> with the peer ID of the destination
              peer. When a peer calls you, the <code>call</code> event is emitted.</p>
              <p>Unlike data connections, when receiving a <code>call</code> event, the call must be answered or no connection is established.</p>
              
              
      <div class="two-col">
        <div class="col col-header">Start call</div>
        <div class="col col-header">Answer call</div>
        <div class="col"><pre>// Call a peer, providing our mediaStream
var call = peer.call('dest-peer-id',
  mediaStream);

</pre></div>
        <div class="col"><pre>peer.on('call', function(call) {
  // Answer the call, providing our mediaStream
  call.answer(mediaStream);
});</pre></div>
          
          
        <div class="clear"></div>
      </div>
              
              
              <p>When calling or answering a call, a MediaStream should be provided. The
              MediaStream represents the local video (webcam) or audio stream and can be
              obtained with some (browser-specific) version of <a
                href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator.getUserMedia"><code>navigator.getUserMedia</code></a>. When answering a
              call, the MediaStream is optional and if none is provided then a one-way
              call is established. Once the call is established, its <code>open</code> property is
              set to true.</p>
              
              <p><code>peer.call</code> and the callback of the <code>call</code> event
              provide a MediaConnection object. The MediaConnection object itself emits
              a <code>stream</code> event whose callback includes the video/audio stream of the other peer.</p>
              
              <paper-material class="code-section" elevation="2">
                  <pre>call.on('stream', function(stream) {
  // `stream` is the MediaStream of the remote peer.
  // Here you'd add it to an HTML video/canvas element.
});</pre>
              </paper-material>
              
              <p>Read the <a href="#mediaconnection">MediaConnection API reference</a> for complete details on its methods and events.</p>

              <h2>SkyWay Rest API</h2>
              <h3>listAllPeers()</h3>
              <p>Gets a list of active PeerID's connecting with the API key.</p>
              
              <paper-material class="code-section" elevation="2">
                  <pre>peer.listAllPeers(function(list){
      // e.g. Add retrieved Peer ID list to userList array.
    for(var cnt = 0;cnt < list.length;cnt++){
        userList.push(list[cnt]);
    }
});</pre>
              </paper-material>
                  
                  <p>The SkyWay Rest API can only be accessed from the domain registered with the API key.</p>

                  <h2>Common questions</h2>

                  <h3>What kind of data can I send?</h3>

                <p>PeerJS has the <a
                  href="https://github.com/binaryjs/js-binarypack">BinaryPack</a>
                serialization format built-in. This means you can send any JSON type as
                well as binary Blobs and ArrayBuffers. Simply send arbitrary data and
                you'll get it out the
                other side:</p>
                  
<paper-material class="code-section" elevation="2"><pre>
conn.send({
  strings: 'hi!',
  numbers: 150,
  arrays: [1,2,3],
  evenBinary: new Blob([1,2,3]),
  andMore: {bool: true}
});</pre></paper-material>
                  
<p>Depending on the value of serialization, the data that can be sent between each of the platforms (JavaScript, iOS, and Android) changes. See <a href='https://github.com/nttcom/skyway-docs-en/blob/master/serialization.md' target="_blank">this chart</a> for details.</p>

        <h3>Are there any caveats?</h3>

          <p>A small percentage of users are behind symmetric NATs. When two
          symmetric NAT users try to connect to each other, NAT traversal is
        impossible and no connection can be made. A workaround is to proxy
      through the connection through a TURN server. You'll have to find your own. If you wish to use SkyWay's TURN server, you can apply <a href='https://skyway.io/ds/turnrequest' target='_blank'>here</a>. You can pass a TURN
  server into the <code>Peer</code> object options. This will allow your PeerJS app to work seamlessly for this situation.</p>
        <h3>How do I use a TURN server?</h3>
        <p>When creating your Peer object, pass in the ICE servers as the config key of the options hash.</p>
<paper-material class="code-section" elevation="2"><pre>
var peer = new Peer({
  config: {'iceServers': [
    { url: 'stun:stun.skyway.io.com:3478' },
    { url: 'turn:homeo@turn.bistri.com:80', credential: 'homeo' }
  ]} /* Sample servers, please use appropriate ones */
});
</pre></paper-material>
      <p>This option doesn't need to be set if you're using SkyWay's TURN server.</p>
        <h3>What is the current state of browser compatibility?</h3>

          <p>We keep an frequently-updated catalogue of WebRTC compatibility
          information and caveats <a href="/status">here</a>.</p>

        <h3>What if my peer has not yet connected to the server when I attempt
          to connect to it?</h3>

          <p>When you try to connect to a peer, PeerServer will hold a
          connection offer for up to 5 seconds before rejecting it. This is useful if you want to reconnect to a peer as it disconnects and reconnects rapidly between web pages.</p>

        <h3>Why am I unable to connect?</h3>
          <p>You could be behind a symmetric NAT, in which case you'll need to set up a TURN server.</p>

        <h3>What about latency/bandwidth?</h3>

          <p>Data sent between the two peers do not touch any other servers except for use of turn server, so the connection speed is limited only by the upload and download rates of the two peers. This also means you don't have the additional latency of an intermediary server.</p>
          <p>The latency to establish a connection can be split into two
          components:
          the brokering of data and the identification of clients. PeerJS has been
          designed to minimize the time you spend in these two areas. For
          brokering, data is sent through an XHR streaming request before a WebSocket
          connection is established, then through WebSockets. For client
          identification, we provide you the ability to pass in your own peer
          IDs, thus eliminating the RTT for retrieving an ID from the server.</p>

        <h3>More questions?</h3>
      <p><a href="https://groups.google.com/forum/#!forum/skywayjs">Discuss SkyWay on SkyWay Technical Forum Google Group.</a></p>
      <p><a href="https://groups.google.com/forum/?fromgroups#!forum/peerjs">Discuss PeerJS on PeerJS Google Group.</a></p>
        <h3>Disclaimer</h3>
          <p>This document is based on <a href="http://peerjs.com/docs/">http://peerjs.com/docs/</a> and provides additional information necessary to use NTT Communication's SkyWay service. We cannot respond to inquiries regarding the original document.<br><br></p>
          
          </div>
      </div>
      
      <div id="footer">
                

      </div>

      
      
      
      
      
      
      
      
      
      
      
      
      

<!--
            <paper-material id="footer" elevation="1" >
                

            </paper-material>
-->

        </div>
          
          
          
          
       
      </paper-header-panel>
<!--    </paper-drawer-panel>-->

    <paper-toast id="caching-complete"
                 duration="6000"
                 text="Caching complete! This app will work offline.">
    </paper-toast>

    <platinum-sw-register auto-register
                          clients-claim
                          skip-waiting
                          on-service-worker-installed="displayInstalledToast">
      <platinum-sw-cache default-cache-strategy="networkFirst"
                         precache-file="precache.json">
      </platinum-sw-cache>
    </platinum-sw-register>

  </template>

  <!-- build:js scripts/app.js -->
  <script src="scripts/app.js"></script>
  <!-- endbuild-->
</body>

</html>
